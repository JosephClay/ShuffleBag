(function(j){var m=Array.prototype;var d=function(){var t=m.slice.call(arguments),v=t[0]||{},q=1,a=t.length,f,u;for(;q<a;q++){f=t[q];if(f){for(u in f){v[u]=f[u]}}}return v};var b=function(f,a){return f+Math.floor((a-f+1)*(Math.random()%1))};var g=function(i){var a=i.length,o,f;while(a){f=Math.floor(Math.random()*a--);o=i[a];i[a]=i[f];i[f]=o}return i};var p=function(f,a){f=f||[];var i=a.qty;while(i--){f[i]=b(a.min,a.max)}return f};var c=j.ShuffleBag=function(a){this._opts=d({},c.defaults,this.defaults,a);this.bag=p([],this._opts);this.length=this.bag.length;this.idx=0;this.shuffle()};c.defaults={min:0,max:1,qty:100};c.prototype={defaults:{},at:function(a){return this.bag[a]},clear:function(){this.bag.length=0;this.idx=0;this.length=0;return this},reset:function(){this.clear();this.bag=p(this.bag,this._opts);this.length=this.bag.length;this.shuffle();return this},shuffle:function(){this.bag=g(this.bag);return this},get:function(){var a=this.idx;return this.bag[this.idx=a>=this.length?0:a+1]},next:function(){return this.get()},prev:function(){var a=this.idx;return this.bag[this.idx=a<=0?this.length-1:a-1]}};var l=["lastIndexOf","indexOf","join","reverse","slice","sort","valueOf","toString","forEach","map","concat","pop","push","shift","splice","unshift"],k=l.length,h=function(a){c.prototype[a]=function(){var e=m[a].apply(this.bag,arguments);this.length=this.bag.length;return e}};while(k--){h(l[k])}if(typeof define==="function"&&define.amd){define("ShuffleBag",[],function(){return c})}})(this);